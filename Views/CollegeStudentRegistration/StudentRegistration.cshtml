@model UAAAS.Models.StudentRegistration

@{
    
    ViewBag.Title = "StudentRegistration";
}

<h2>Student Registration</h2>

<link href="@Url.Content("~/Content/jntuh-styles.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.base.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.button.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.theme.css")" rel="stylesheet" type="text/css" />



<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Validations.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jspdf.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jspdf.plugin.from_html.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" rel="stylesheet" type="text/css"/>
<div class="alerttext" style="background-color:maroon; border: 1px solid #f49820;color: white">
    <p><b>Note:</b>Please Upload Orginal Aadhaar Scan Copy.</p>
</div><br />

@using (Ajax.BeginForm("StudentRegistration", "CollegeStudentRegistration", new AjaxOptions(), new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
    @Html.HiddenFor(model=>model.SpecializationId)
    @Html.HiddenFor(model=>model.DepartmentId)
    @Html.HiddenFor(model=>model.ShiftId)
    <fieldset>
        <div class="editor-label" style="width: 200px;">
            Academic Year
            @*@Html.LabelFor(model => model.SpecializationName)*@
        </div>
        <div class="editor-field" style="width: 380px;">
            <span style="font-weight: bold">@Html.DisplayFor(model => model.PresentAcademicYear)</span>

        </div>
        <div class="editor-label" style="width: 200px;">
            Specialization Name
            @*@Html.LabelFor(model => model.SpecializationName)*@
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.DisplayFor(model => model.SpecializationName)

        </div>
        <div class="editor-label" style="width: 200px;">
            @*@Html.LabelFor(model => model.HallTicketNumber)*@
            Hall Ticket/Roll Number
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.HallTicketNumber)
            @Html.ValidationMessageFor(model => model.HallTicketNumber)
        </div>

        <div class="editor-label" style="width: 200px;">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <div class="editor-label" style="width: 200px;">
            @Html.LabelFor(model => model.GenderId)<span class="mandatory">*</span>
        </div>
        <div class="editor-field" style="width: 380px;">
            <label>@Html.RadioButtonFor(model => model.GenderId, 1) Male </label>
            <label>@Html.RadioButtonFor(model => model.GenderId, 0) Female </label>
            @Html.ValidationMessageFor(model => model.GenderId)
        </div>

        <div class="editor-label" style="width: 200px;">
            @Html.LabelFor(model => model.FatherOrhusbandName)
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.FatherOrhusbandName)
            @Html.ValidationMessageFor(model => model.FatherOrhusbandName)
        </div>

        <div class="editor-label" style="width: 200px;">
            @Html.LabelFor(model => model.studentDateOfBirth)
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.studentDateOfBirth, new {@class = "calendar", @placeholder = "DD/MM/YYYY"})
            @Html.ValidationMessageFor(model => model.studentDateOfBirth)
        </div>

        <div class="editor-label" style="width: 200px;">
            @Html.LabelFor(model => model.Mobile)
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.Mobile)
            @Html.ValidationMessageFor(model => model.Mobile)
        </div>

        <div class="editor-label" style="width: 200px;">
            @Html.LabelFor(model => model.Email)
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.Email)
            @Html.ValidationMessageFor(model => model.Email)
        </div>

        <div class="editor-label" style="width: 200px;">
            @Html.LabelFor(model => model.AadhaarNumber)
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.AadhaarNumber)
            @Html.ValidationMessageFor(model => model.AadhaarNumber)
        </div>
        <div class="editor-label" style="width: 200px;">
            @Html.LabelFor(model => model.AadhaarDocument)
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.AadhaarDocument, new {type = "file", @class = "aadhaarfile required"})
            @Html.ValidationMessageFor(model => model.AadhaarDocument)
        </div>

        @*<div class="editor-label">
            @Html.LabelFor(model => model.department)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.department)
            @Html.ValidationMessageFor(model => model.department)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.SpecializationId)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SpecializationId)
            @Html.ValidationMessageFor(model => model.SpecializationId)
        </div>*@


        <div style="text-align: center">
            <p>
                <input type="submit" value="Submit"/>
            </p>
        </div>
    </fieldset>
}
<script type="text/javascript">
    $(document).ready(function () {
        debugger;
       
        $('.calendar').datepicker({
            dateFormat: 'dd/mm/yy',
            changeMonth: true,
            changeYear: true,
            showOn: "button",
            buttonImage: "@Url.Content("~/Content/themes/base/images/calendar.gif")",
            buttonImageOnly: true
        });
        function getCertificateSize(fileid) {
            debugger;
            try {
                var fileSize = 0;
                //for IE

                if ($.browser.msie) {
                    //before making an object of ActiveXObject,
                    //please make sure ActiveX is enabled in your IE browser
                    var objFSO = new ActiveXObject("Scripting.FileSystemObject");
                    var filePath = $(".aadhaarfile")[0].value;
                    var objFile = objFSO.getFile(filePath);
                    var fileSize = objFile.size; //size in kb
                    //fileSize = fileSize / 1048576; //size in mb
                }
                    //for FF, Safari, Opeara and Others
                else {
                    fileSize = $(".aadhaarfile")[0].files[0].size //size in kb
                    //fileSize = fileSize / 1048576; //size in mb
                }

                return fileSize;
            }
            catch (e) {

                //alert("Error is : " + e);
            }
        }
        $(".aadhaarfile").change(function () {
            debugger;
            var file = getNameFromPath($(this).val());
            var flag;
            if (file != null) {
                var extension = file.substr((file.lastIndexOf('.') + 1));
                switch (extension) {
                    case 'jpg':
                    case 'JPG':
                    case 'jpeg':
                    case 'JPEG':
                        flag = true;
                        break;
                    default:
                        flag = false;
                }
            }

            if (flag == false) {
                alert("Aadhaar Card document should be in JPEG format only");
                $(this).val('');
                return false;
            }
            else {
                var size = getCertificateSize(file);
                if (size > 102400) {
                    alert("Aadhaar Card document size should not exceed 100 KB in Size");
                    $(this).val('');
                }
            //else {
            //    var size = GetCertificateSize(this.id);

            //    if (size > 102400) {
            //        alert("Aadhaar Card document size should not exceed 100 KB in Size");
            //        $(this).val('');
            //    }
                //else
                //    if (size  ) {

                //}
            }
        });

        //get file path from client system
        function getNameFromPath(strFilepath) {


            var objRE = new RegExp(/([^\/\\]+)$/);
            var strName = objRE.exec(strFilepath);

            if (strName == null) {
                return null;
            }
            else {
                return strName[0];
            }
        }
    });
   
</script>