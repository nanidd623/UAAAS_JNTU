@model UAAAS.Controllers.College.Scmuploads

@{
 
    ViewBag.Title = "FacultySCMEdit";
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Validations.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $('.calendar').attr("readonly", "true");
        $('.calendar').datepicker({
            dateFormat: 'dd/mm/yy',
            changeMonth: true,
            changeYear: true,
            showOn: "button",
            buttonImage: "@Url.Content("~/Content/themes/base/images/calendar.gif")",
            buttonImageOnly: true
        });
        //get SCM pdf file size
        function GetAssistantProfessorFileSize(fileid) {
            try {
                var fileSize = 0;
                //for IE
                if ($.browser.msie) {
                    //before making an object of ActiveXObject, //please make sure ActiveX is enabled in your IE browser
                    var objFSO = new ActiveXObject("Scripting.FileSystemObject");
                    var filePath = $("#" + fileid)[0].value;
                    var objFile = objFSO.getFile(filePath);
                    var fileSize = objFile.size; //size in kb
                    //alert(fileSize);
                    //fileSize = fileSize / 1048576; //size in mb
                    // fileSize = fileSize / 1048576; //size in mb
                    alert(fileSize);
                }
                    //for FF, Safari, Opeara and Others
                else {
                    fileSize = $("#SCMDocument")[0].files[0].size; //size in kb
                    //fileSize = fileSize / 1048576; //size in mb
                }
                return fileSize;
            } catch (e) {

                //alert("Error is : " + e);
            }
        }

        //change function for SCM Document pdf doc
        $(".SCMDocumentclass").change(function () {
            debugger;
            var file = getNameFromPath($(this).val());
            var flag;
            if (file != null) {
                var extension = file.substr((file.lastIndexOf('.') + 1));
                switch (extension) {

                    case 'pdf':
                    case 'PDF':

                        flag = true;
                        break;
                    default:
                        flag = false;
                }
            }

            if (flag == false) {
                $(".SCMDocumentclass > span").text("You can upload only  PDF files");
                $(this).val('');
                return false;
            } else {
                var size = GetAssistantProfessorFileSize(file);
                size = size / 1048576;
                if (size > 1) {
                    $(".SCMDocumentclass > span").text("Document should not exceed 1 MB in Size");
                    $(this).val('');
                } else {

                    $(".SCMDocumentclass > span").text("");
                }
            }

        });
    });
</script>
@using (Ajax.BeginForm("FacultySCMEdit", "CollegeSCMProceedingsRequest", new AjaxOptions(), new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)
        <div>
            <table class="faculty_table" style="text-align: center; width: 100%">
                <tr>
                    <td class="col1" style="font-weight: bold; width: 30%;">
                        <span>Registration Number *</span>
                    </td>
                    <td class="col2" colspan="2" style="width: 70%;">
                        @*@Html.TextBoxFor(model => model.RegistrationNumber, new {style = "width:200px", @required = true})*@
                        @*@Html.EditorFor(model => model.RegistrationNumber, new { @maxlength = "25", @placeholder = "Enter Faculty Registration Number", style = "width: 40%;", @required = true })*@
                        @Html.DisplayFor(model => model.RegistrationNo)
                        @Html.HiddenFor(model => model.RegistrationNo)
                        @Html.HiddenFor(model => model.CollegeId)
                        @Html.HiddenFor(model => model.Id)
                        @Html.HiddenFor(model=>model.SpecializationId)
                    </td>
                </tr>
                <tr>
                    <td class="col1" style="font-weight: bold; width: 30%;">
                        <span>Department *</span>
                    </td>
                    <td class="col2" colspan="2" style="width: 70%;">
                        @Html.DisplayFor(model => model.Department)
                        @Html.HiddenFor(model=>model.DepartmentId)
                        @*@Html.DropDownListFor(model => model.DepartmentId,
                        new SelectList(ViewBag.departments as System.Collections.IEnumerable, "DepartmentId", "SpecializationName"),
                        "-- Select --", new { id = "department", style = "width: 40%" })*@

                    </td>
                </tr>
                <tr>
                    <td class="col1" style="font-weight: bold; width: 30%;">
                        <span>Designation *</span>
                    </td>
                    <td class="col2" colspan="2" style="width: 70%;">
                        @Html.DropDownListFor(model => model.DesignationId,
                        new SelectList(ViewBag.designation as System.Collections.IEnumerable, "id", "designation"),
                        "-- Select --", new { id = "id", style = "width: 40%" })

                    </td>
                </tr>
                <tr>
                    <td class="col1" style="font-weight: bold; width: 30%;">
                        <span>SCM Date *</span>
                    </td>
                    <td class="col2" colspan="2" style="width: 70%;">
                        @*@class = "calendar",*@
                        @Html.TextBoxFor(model => model.NewScmDate, new { @class = "calendar", style = "width:200px", @placeholder = "DD/MM/YYYY",@required = true })@*<span>(DD/MM/YYYY)</span>*@@*@required = true*@
                         
                     </td>
                </tr>
              
                <tr>
                    <td class="col1" style="font-weight: bold; width: 30%; vertical-align: middle">
                        @*<span>Assistant Professor SCM Document</span>*@
                        <span>Faculty SCM Document</span>
                        <br />
                        <span style="color: blue;">(PDF should be less than 1MB size)</span>
                    </td>
                    <td class="col2" colspan="2" style="width: 70%;">
                        <div class="editor-field AssistantProfessorDocuments">
                            @if (@Model.AssistantProfessorDocumentView!=null)
                            {
                              <a href="../Content/Upload/SCMUploads/@Model.AssistantProfessorDocumentView.Replace("~", "")" target="_blank">
                               <span style="font-weight: bold; color: red;">View</span>
                                      </a>
                            }
                            @Html.TextBoxFor(model => model.SCMDocument, new { type = "file", @class = "SCMDocumentclass" })
                            @Html.HiddenFor(model=>model.AssistantProfessorDocumentView)
                            <br/>
                            <span style="color: red;"></span>
                        </div>
                    </td>
                </tr>
            </table>
            <p style="text-align: center">
                <input type="submit" value="Save" class="valid" />
            </p>
            </div>
}

