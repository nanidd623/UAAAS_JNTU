@model IEnumerable<UAAAS.Models.jntuh_ffc_external_auditor_groups>
@using UAAAS.Models;
@{
    ViewBag.Title = "AuditorsCountGroupwise";
    int index = 1;
     uaaasDBContext db = new uaaasDBContext();
}
<h2>Auditors Count Group wise</h2>
@section onReady{

/* Initialize table and make first column non-sortable*/
   $('#example').dataTable({  "bJQueryUI": true,
                              "iDisplayLength": 50,
                              "bStateSave": false,
     "sDom": '<"top"lfip>rt<"bottom"ip<"clear">'
});
}
   

@using (Html.BeginForm())
{   
    <table id="example" class="display">
        <thead>
            <tr>
                <th style="width: 40px; text-align: center;">S.No
                </th>
                <th style="text-align: left;">Group
                </th>
                <th style="text-align: left;">University
                </th>
                <th style="text-align: center;">Count
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var Group in Model.Select(g => g.Group).Distinct().ToList())
            {                    
                <tr>
                    <td style="text-align: center;">
                        @(index++)
                    </td>
                    <td style="text-align: left; text-transform: uppercase;">
                       @Group
                    </td>
                    <td style="text-align: left; text-transform: uppercase;">   
                       @{
                           int count=0;
                       }                 
                        @foreach (var University in Model.Where(g => g.Group == @Group && g.isActive==true).OrderBy(g => g.University).Select(g => g.University).ToList())
                        {
                           <span>@University</span><br />
                            count+=@db.jntuh_ffc_auditor.Where(a=>a.isActive==true && a.auditorPlace==@University).Count();
                        }
                    </td>                   
                    <td style="text-align: center; text-transform: uppercase;">
                        @count
                    </td>
                </tr>
            }
        </tbody>
    </table>
}