@model IList<UAAAS.Models.CollegeIntakeExisting>
@using UAAAS.Models;
@{
    uaaasDBContext db = new uaaasDBContext();
    int sno = 1;
}
<table border="1" style="width: 100%">
    <tr>
        <th style="text-align: center; background-color: yellow; vertical-align: top;" rowspan="2">SNo</th>
        <th style="text-align: center; background-color: yellow; vertical-align: top;" rowspan="2">Code</th>
        <th style="text-align: left; background-color: yellow; vertical-align: top;" rowspan="2">College Name</th>
        <th style="text-align: left; background-color: yellow; vertical-align: top;" rowspan="2">Degree</th>
        <th style="text-align: left; background-color: yellow; vertical-align: top;" rowspan="2">Department</th>
        <th style="text-align: left; background-color: yellow; vertical-align: top;" rowspan="2">Specialization</th>
        <th style="text-align: center; background-color: yellow; vertical-align: top;" rowspan="2">ShiftId</th>
        <th style="text-align: center; background-color: yellow; vertical-align: top;" colspan="4">Intake</th>
    </tr>
    <tr>
        <th style="text-align: right; background-color: yellow; vertical-align: top;">IV Year</th>
        <th style="text-align: right; background-color: yellow; vertical-align: top;">III Year</th>
        <th style="text-align: right; background-color: yellow; vertical-align: top;">II Year</th>
        <th style="text-align: right; background-color: yellow; vertical-align: top;">I Year</th>
    </tr>

    @foreach (var collegeId in Model.Select(c => c.collegeId).Distinct().ToList())
    {
        var count = Model.Where(m => m.collegeId == collegeId).Select(m => m).Count();
        var list = Model.Where(c => c.collegeId == collegeId).ToList();

        foreach (var item in list)
        {
            if (list.IndexOf(item) == 0)
            {
        <tr>
            <td style="text-align: center; vertical-align: top;" rowspan="@count">@(sno++)</td>
            <td style="text-align: center; vertical-align: top; text-transform: uppercase" rowspan="@count">@db.jntuh_college.Find(item.collegeId).collegeCode</td>
            <td style="text-align: left; vertical-align: top; text-transform: uppercase" rowspan="@count">@db.jntuh_college.Find(item.collegeId).collegeName</td>
            <td style="text-align: left; vertical-align: top;">@item.Degree</td>
            <td style="text-align: left; vertical-align: top;">@item.Department</td>
            <td style="text-align: left; vertical-align: top;">@item.Specialization</td>
            <td style="text-align: center; vertical-align: top;">@item.shiftId</td>
            <td style="text-align: right; vertical-align: top;">@item.approvedIntake4</td>
            <td style="text-align: right; vertical-align: top;">@item.approvedIntake3</td>
            <td style="text-align: right; vertical-align: top;">@item.approvedIntake2</td>
            <td style="text-align: right; vertical-align: top;">@item.approvedIntake1</td>
            @* <div style="display:none">  @(index++)</div>*@
            @*index=@(index++)*@
        </tr>
            }
            else
            {
        <tr>
            <td style="text-align: left; vertical-align: top;">@item.Degree</td>
            <td style="text-align: left; vertical-align: top;">@item.Department</td>
            <td style="text-align: left; vertical-align: top;">@item.Specialization</td>
            <td style="text-align: center; vertical-align: top;">@item.shiftId</td>
            <td style="text-align: right; vertical-align: top;">@item.approvedIntake4</td>
            <td style="text-align: right; vertical-align: top;">@item.approvedIntake3</td>
            <td style="text-align: right; vertical-align: top;">@item.approvedIntake2</td>
            <td style="text-align: right; vertical-align: top;">@item.approvedIntake1</td>
        </tr>
            }

        }

    }

</table>
