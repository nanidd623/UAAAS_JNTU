@model UAAAS.Models.ugstudents
@{

    ViewBag.Title = "StudentRegistration";
}
<link href="@Url.Content("~/Content/jntuh-styles.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.base.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.button.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.theme.css")" rel="stylesheet" type="text/css" />



<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Validations.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jspdf.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jspdf.plugin.from_html.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" rel="stylesheet" type="text/css" />
<div class="alerttext" style="background-color:maroon; border: 1px solid #f49820;color: white">
    <p><b>Note:</b>Please Upload Orginal Aadhaar Scan Copy.</p>
</div><br/>

<script type="text/javascript">
    $(document).ready(function () {
        debugger;
        $('.calendar').attr("readonly", "true");
        $('.calendar').datepicker({
            dateFormat: 'dd/mm/yy',
            changeMonth: true,
            changeYear: true,
            showOn: "button",
            buttonImage: "@Url.Content("~/Content/themes/base/images/calendar.gif")",
            buttonImageOnly: true
        });

        //get file size
        function getCertificateSize(fileid) {
            debugger;
            try {
                var fileSize = 0;
                //for IE

                if ($.browser.msie) {
                    //before making an object of ActiveXObject,
                    //please make sure ActiveX is enabled in your IE browser
                    var objFSO = new ActiveXObject("Scripting.FileSystemObject");
                    var filePath = $(".aadhaarfile")[0].value;
                    var objFile = objFSO.getFile(filePath);
                    var fileSize = objFile.size; //size in kb
                    //fileSize = fileSize / 1048576; //size in mb
                }
                    //for FF, Safari, Opeara and Others
                else {
                    fileSize = $(".aadhaarfile")[0].files[0].size //size in kb
                    //fileSize = fileSize / 1048576; //size in mb
                }

                return fileSize;
            }
            catch (e) {

                //alert("Error is : " + e);
            }
        }

        //get file path from client system
        function getNameFromPath(strFilepath) {
            debugger;
            var objRE = new RegExp(/([^\/\\]+)$/);
            var strName = objRE.exec(strFilepath);

            if (strName == null) {
                return null;
            }
            else {
                return strName[0];
            }
        }

        $(".aadhaarfile").change(function () {
            debugger;
            var file = getNameFromPath($(this).val());
            var flag;
            if (file != null) {
                var extension = file.substr((file.lastIndexOf('.') + 1));
                switch (extension) {
                    case 'jpg':
                    case 'JPG':
                    case 'jpeg':
                    case 'JPEG':
                        flag = true;
                        break;
                    default:
                        flag = false;
                }
            }

            if (flag == false) {
                alert("Aadhaar Card document should be in JPEG format only");
                $(this).val('');
                return false;
            }
            else {
                var size = getCertificateSize(file);
                if (size > 102400) {
                    alert("Aadhaar Card document size should not exceed 100 KB in Size");
                    $(this).val('');
                }
                //else
                //    if (size  ) {

                //}
            }
        });

       
    });

</script>


@using (Ajax.BeginForm("CreateUgStudent", "Student", new AjaxOptions(), new { enctype = "multipart/form-data" }))
{

    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
    @Html.HiddenFor(model => model.Id)
    @Html.HiddenFor(model => model.departmentid)

    <fieldset>
        <div class="editor-label" style="width: 250px;">
            @Html.LabelFor(model => model.studentName)
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.DisplayFor(model => model.studentName)
            @Html.ValidationMessageFor(model => model.studentName)
        </div>
        <div class="editor-label" style="width: 250px;">
            @Html.LabelFor(model => model.HallTicketNumber)
            @Html.HiddenFor(model => model.HallTicketNumber)
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.DisplayFor(model => model.HallTicketNumber, new { value = "HallTicketNumber" })
            @Html.ValidationMessageFor(model => model.HallTicketNumber)
        </div>
        <div class="editor-label" style="width: 250px;">
            @Html.LabelFor(model => model.MobileNumber)
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.MobileNumber)
            @Html.ValidationMessageFor(model => model.MobileNumber)
        </div>
        <div class="editor-label" style="width: 250px;">
            @Html.LabelFor(model => model.Email)
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.Email)
            @Html.ValidationMessageFor(model => model.Email)
        </div>
        <div class="editor-label" style="width: 250px;">
            @Html.LabelFor(model => model.NameAsAadhaar)<span>(As For Aadhaar)</span>
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.NameAsAadhaar)
            @Html.ValidationMessageFor(model => model.NameAsAadhaar)
        </div>
        <div class="editor-label" style="width: 250px;">
            @Html.LabelFor(model => model.DOBasAadhaar)<span>(As For Aadhaar)</span>
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.DOBasAadhaar, new { @class = "calendar", @placeholder = "DD/MM/YYYY" })
            @Html.ValidationMessageFor(model => model.DOBasAadhaar)
        </div>
        <div class="editor-label" style="width: 250px;">
            @Html.LabelFor(model => model.AadhaarNumber)
        </div>
        <div class="editor-field" style="width: 380px;">
            @Html.TextBoxFor(model => model.AadhaarNumber)
            @Html.ValidationMessageFor(model => model.AadhaarNumber)
        </div>
        <div class="editor-label" style="width: 250px;">
            @Html.LabelFor(model => model.aadhardocument)
        </div>
        <div class="editor-field" style="width: 380px;">

         

            @if (!string.IsNullOrEmpty(Model.aadhardocumentview))
            {
                @Html.HiddenFor(model => model.aadhardocumentview)
                @Html.TextBoxFor(model => model.aadhardocument, new { type = "file", @class = "aadhaarfile" })
                @Html.ValidationMessageFor(model => model.aadhardocument)
                <a href="~/Content/Upload/Student/UG/AADHAARCARDS/@Model.aadhardocumentview" target="_blank">
                    <span style="font-weight: bold; color: red;">View</span>
                </a>
            }
            else
            {
                @Html.TextBoxFor(model => model.aadhardocument, new { type = "file", @class = "aadhaarfile required" })
                @Html.ValidationMessageFor(model => model.aadhardocument)
            }
        </div>

        <div style="text-align: center">
            <p>
                <input type="submit" value="Submit" />
            </p>
        </div>
    </fieldset>

}



