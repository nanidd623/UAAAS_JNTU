@model UAAAS.Models.SubmitData
@{
    //Layout = "~/Views/Shared/_LayoutLeftMenu.cshtml";
    //if (Roles.IsUserInRole("DataEntry"))
    //{
    //    Layout = "~/Views/Shared/_DataEntryLayoutLeftMenu.cshtml";
    //}
    ViewBag.Title = "Appeal Submission";
}



<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Validations.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        //get delivery chalana file size
        function GetAppealSubmissionFileSize(fileid) {
            try {
                var fileSize = 0;
                //for IE
                if ($.browser.msie) {
                    //before making an object of ActiveXObject, //please make sure ActiveX is enabled in your IE browser
                    var objFSO = new ActiveXObject("Scripting.FileSystemObject"); var filePath = $("#" + fileid)[0].value;
                    var objFile = objFSO.getFile(filePath);
                    var fileSize = objFile.size; //size in kb
                    //alert(fileSize);
                    //fileSize = fileSize / 1048576; //size in mb 
                    // fileSize = fileSize / 1048576; //size in mb 
                    alert(fileSize);
                }
                    //for FF, Safari, Opeara and Others
                else {
                    fileSize = $("#DeclarationPath")[0].files[0].size; //size in kb
                    //fileSize = fileSize / 1048576; //size in mb 
                }
                return fileSize;
            }
            catch (e) {

                //alert("Error is : " + e);
            }
        }

     


        //get file path from client system
        function getNameFromPath(strFilepath) {
            var objRE = new RegExp(/([^\/\\]+)$/);
            var strName = objRE.exec(strFilepath);

            if (strName == null) {
                return null;
            }
            else {
                return strName[0];
            }
        }

        //function of the Appeal submission File Upload
        $(function () {
            $(".appealfileupload").change(function () {

                var file = getNameFromPath($(this).val());
                var flag;
                if (file != null) {
                    var extension = file.substr((file.lastIndexOf('.') + 1));
                    switch (extension) {

                        case 'pdf':
                        case 'PDF':

                            flag = true;
                            break;
                        default:
                            flag = false;
                    }
                }

                if (flag == false) {
                    $(".appealfileuploads > span").text("You can upload only  PDF files");
                    $(this).val('');
                    return false;
                }
                else {
                    var size = GetAppealSubmissionFileSize(file);
                    size = size / 1048576;
                    if (size > 1) {
                        $(".appealfileuploads > span").text("Document should not exceed 1 MB in Size");
                        $(this).val('');
                    }
                    else {

                        $(".appealfileuploads > span").text("");
                    }
                }

            });
        });

      





    });

    //get other supporting Doc
    function GetothersupportingFileSize(fileid) {
        try {
            var fileSize = 0;
            //for IE
            if ($.browser.msie) {
                //before making an object of ActiveXObject, //please make sure ActiveX is enabled in your IE browser
                var objFSO = new ActiveXObject("Scripting.FileSystemObject"); var filePath = $("#" + fileid)[0].value;
                var objFile = objFSO.getFile(filePath);
                var fileSize = objFile.size; //size in kb
                //alert(fileSize);
                //fileSize = fileSize / 1048576; //size in mb 
                // fileSize = fileSize / 1048576; //size in mb 
                alert(fileSize);
            }
                //for FF, Safari, Opeara and Others
            else {
                fileSize = $("#OtherSupportingDoc")[0].files[0].size; //size in kb
                //fileSize = fileSize / 1048576; //size in mb 
            }
            return fileSize;
        }
        catch (e) {

            //alert("Error is : " + e);
        }
    }


    //function of the other supporting file upload
    $(function () {
        $(".othersupportingdoc").change(function () {

            var file = getNameFromPath($(this).val());
            var flag;
            if (file != null) {
                var extension = file.substr((file.lastIndexOf('.') + 1));
                switch (extension) {

                    case 'pdf':
                    case 'PDF':

                        flag = true;
                        break;
                    default:
                        flag = false;
                }
            }

            if (flag == false) {
                $(".othersupportingdocs > span").text("You can upload only  PDF files");
                $(this).val('');
                return false;
            }
            else {
                var size = GetothersupportingFileSize(file);
                size = size / 1048576;
                if (size > 2) {
                    $(".othersupportingdocs > span").text("Document should not exceed 2 MB in Size");
                    $(this).val('');
                }
                else {

                    $(".othersupportingdocs > span").text("");
                }
            }

        });
    });



    function GetAppealSubmissionFileSize(fileid) {
        try {
            var fileSize = 0;
            //for IE
            if ($.browser.msie) {
                //before making an object of ActiveXObject, //please make sure ActiveX is enabled in your IE browser
                var objFSO = new ActiveXObject("Scripting.FileSystemObject"); var filePath = $("#" + fileid)[0].value;
                var objFile = objFSO.getFile(filePath);
                var fileSize = objFile.size; //size in kb
                //alert(fileSize);
                //fileSize = fileSize / 1048576; //size in mb 
                // fileSize = fileSize / 1048576; //size in mb 
                alert(fileSize);
            }
                //for FF, Safari, Opeara and Others
            else {
                fileSize = $("#DeclarationPath")[0].files[0].size; //size in kb
                //fileSize = fileSize / 1048576; //size in mb 
            }
            return fileSize;
        }
        catch (e) {

            //alert("Error is : " + e);
        }
    }


    //get file path from client system
    function getNameFromPath(strFilepath) {
        var objRE = new RegExp(/([^\/\\]+)$/);
        var strName = objRE.exec(strFilepath);

        if (strName == null) {
            return null;
        }
        else {
            return strName[0];
        }
    }

    //function of the Appeal submission File Upload
    $(function () {
        $(".appealfileupload").change(function () {

            var file = getNameFromPath($(this).val());
            var flag;
            if (file != null) {
                var extension = file.substr((file.lastIndexOf('.') + 1));
                switch (extension) {

                    case 'pdf':
                    case 'PDF':

                        flag = true;
                        break;
                    default:
                        flag = false;
                }
            }

            if (flag == false) {
                $(".appealfileuploads > span").text("You can upload only  PDF files");
                $(this).val('');
                return false;
            }
            else {
                var size = GetAppealSubmissionFileSize(file);
                size = size / 1048576;
                if (size > 1) {
                    $(".appealfileuploads > span").text("Document should not exceed 1 MB in Size");
                    $(this).val('');
                }
                else {

                    $(".appealfileuploads > span").text("");
                }
            }

        });
    });
</script>

<style>
    #Remarks {
        height: 40px;
        width:22%
    }
</style>

<div id="div_print">

    @*<p class="create_link_right">
        <span style="color: red; font-style: italic; font-weight: bold;">
            <a href="../../Content/Declaration.doc">Download Declaration</a>
        </span>
    </p>
    @if (@ViewBag.IscollegeEditable == false)
    {
        <p class="create_link_right">
            <span style="color: red; font-style: italic; font-weight: bold;">
                <a href='@Url.Action("CollegeDataofSubmitAppeal", "SubmitData", new { preview = 0, strcollegeId =

UAAAS.Models.Utilities.EncryptString(Model.collegeId.ToString(), System.Web.Configuration.WebConfigurationManager.AppSettings["CryptoKey"])

})' target="_blank" title="Click here for Acknowledgement">
                    <b>Appeal Submission Acknowledgement</b><img src="@Url.Content("../../Content/images/pdf.png")" style="vertical-align:

middle;" alt="A-115" height="18">
                </a>
            </span>
        </p>
    }*@

    @if (@ViewBag.IscollegeEditable == false)
    {
        <p class="create_link_right">
            <span style="color: red; font-style: italic; font-weight: bold;">
                <a href='@Url.Action("CollegeDataofSubmitAppeal", "SubmitData", new { preview = 0, strcollegeId = UAAAS.Models.Utilities.EncryptString(Model.collegeId.ToString(), System.Web.Configuration.WebConfigurationManager.AppSettings["CryptoKey"]) })' target="_blank" title="Click here for Acknowledgement">
                    <b>Appeal Submission Acknowledgement</b><img src="@Url.Content("../../Content/images/pdf.png")" style="vertical-align: middle;" alt="A-115" height="18">
                </a>
            </span>
        </p>
    }
    else
    {
        <p class="create_link_right">
            <span style="color: red; font-style: italic; font-weight: bold;">
                <a href="../../Content/Declaration.doc">Download Declaration</a>
            </span>
        </p>
    }

   
    @using (Ajax.BeginForm("AppealSubmission", "FacultyVerification", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "LaboratoriesDialog" }, new { enctype = "multipart/form-data" }))
    {
        @Html.ValidationSummary(true)
        if (TempData["Error"] != null)
        {
            <div class="error">
                <p><strong>Error:</strong> @TempData["Error"].ToString()</p>
            </div>
        }
        if (TempData["Success"] != null)
        {
            <div class="success">
                <p><strong>Success:</strong> @TempData["Success"].ToString()</p>
            </div>

        }
        <h2>Appeal Submission</h2>
        @Html.HiddenFor(model => model.collegeId, new { @Value = Model.collegeId })
        <br />
        <p>
            <ol style="margin-left: 20px;">
                <li>Liabilities if any on this count shall be the sole responsibility of the applicant's Society / Trust and shall be settled as per the rules and regulations as applicable.</li>
                <li>The Grant or Rejection of this affiliation application does not in any way absolve the Society / Institution from the final outcome of the Court cases pending in the High Court or any other court or any other action that may be initiated by the University or Government against the Management/Institution for the previous academic years.</li>
                <li>The mere submission of this Application does not guarantee an Affiliation. (Affiliation is purely based on satisfaction of norms and criteria as laid down by AICTE/PCI/University from time to time.)</li>
                <li>If any conditional affiliation is given to the Institution or College, then the University has absolute right to cancel the affiliation without prior notice if the Institution/ College does not comply with the conditions of affiliation within the time stipulated in the conditional affiliation order.</li>
            </ol>
            <br />
            <br />
            <b>Certified that</b><br />
            <br />
            <ul style="margin-left: 20px; list-style-type: lower-alpha;">
                <li>The Institute is not offering any academic programme, which is not approved by JNTUH.</li>
                <li>No other University has been approached for affiliation of the institute/courses mentioned in this application.</li>
                <li>All Courses are conducted as per norms, standards and guidelines of the JNTUH and all the rules and regulations of the university are being followed as specified from time to time.</li>
                <li>All the physical deficiencies stated in the last approval letter for UG & PG programmes have been rectified (for existing institutions).</li>
                <li>The AICTE / PCI scales of pay and allowance have been granted to the teaching faculty and other staff.</li>
                <li>The admissions are made on merit and as per JNTUH admission guidelines and capitation fee or donation of any kind has not been charged for admission.</li>
                <li>The teaching faculty and staff have been recruited as per qualification and experience as laid down by the AICTE / PCI.</li>
                <li>The tuition and the other fee are charged within the criteria prescribed by the Competent Authorities.</li>
                <li>The accounts of the institution are being maintained as per the provisions of relevant statutes and certified by a Chartered Accountant.</li>
                <li>The intake in any of the JNTUH approved courses has not been increased beyond the sanctioned intake, without prior approval from the University.</li>
                <li>The building and premises in which the institution is functioning is not being utilized for any other courses/ programmes which are not approved by the council</li>
            </ul>
            <br />
            <b>
                We solemnly declare that all the information provided in this application form is true and if any information is found to be incorrect or false, we are liable for rejection of the application and further prosecution and legal action by the University as per University regulations.
            </b>
            <br />
            @*<br />*@
            <br />
            <table style="width: 100%">
                <tr>
                    <td>
                        <b>Date:</b>
                    </td>
                </tr>
                <tr>
                    <td>
                        <b>Place:</b>
                    </td>
                </tr>
            </table>
            <br />
            <br />
            <br />
            <table style="width: 100%;">
                <tr>
                    <td style="width: 50%; text-align: center;">
                        <b>
                            Name and Signature of the
                            <br />
                            Chairperson/Secretary of the Society
                        </b>
                    </td>
                    <td style="text-align: center;">
                        <b>
                            Name and Signature of the<br />
                            Head of the Institution
                        </b>
                    </td>
                </tr>
            </table>
        </p>
        <hr/>
        if (TempData["Payment"] != null)
        {
            <div class="error">
                <p><strong>Error:</strong> @TempData["Payment"].ToString()</p>
            </div>
        }

        if (@ViewBag.IscollegeEditable == true)
        {

            <table style="width:100%">
                <tr>
                    <td colspan="4">
                        @Html.CheckBoxFor(model => model.IsCollegeEditable)
                        <span>I agree to the terms of JNTUH</span>
                    </td>
                </tr>
                <tr>
                    <td style="width:20%">
                        <span><b>Upload Declaration Scanned Copy</b></span>
                    </td>
                    <td class="appealfileuploads" colspan="3" style="text-align: left">
                        @Html.TextBoxFor(model => model.DeclarationPath, new { type = "file", @class = "appealfileupload", @required = true })
                        <br />
                        <span style="color: red;"></span>
                        @if (!String.IsNullOrEmpty(Model.DeclarationPathdoc))
                        {
                       
                            <a href="../@Model.DeclarationPathdoc.Replace("~", "")" target="_blank">
                                <span style="font-weight:bold;color:red">View</span>
                            </a>
                        }
                    </td>                  
                   
                 </tr>
                <tr>
                    <td style="width:20%">
                        <span><b>Any Other Supporting Document</b></span>
                    </td>
                    <td class="othersupportingdocs" colspan="3" style="text-align: left">
                        @Html.TextBoxFor(model => model.OtherSupportingDoc, new { type = "file", @class = "othersupportingdoc" })
                        <br />
                        <span style="color: red;"></span>
                        @if (!String.IsNullOrEmpty(Model.OtherSupportingDocpath))
                        {
                      
                            <a href="../@Model.OtherSupportingDocpath.Replace("~", "")" target="_blank">
                                <span style="font-weight:bold;color:red">View</span>
                            </a>
                       
                        }
                    </td>
                  
                </tr>
                <tr>
                    <td style="vertical-align: top;width:20%">
                        <span><b>Remarks</b></span>
                    </td>
                    <td colspan="3" style="text-align:left">
                        @Html.TextAreaFor(model=>model.Remarks,new{@style="resize:none;width:500px;height:50px",@rows="5",@cols="5",@maxlength="450"})
                        <br />
                        <span style="color: red;"></span>
                    </td>
                </tr>
                <tr>
                    <td colspan="4" style="text-align:right">
                        @if (ViewBag.IsLatePaymentDone == true)
                        {
                            <input id="submitData" type="submit" value="Submit Appeal" class="submit" name="cmd" />
                        }
                        @*else if (ViewBag.IsLatePaymentDone == false)
                        {
                            <input id="submitData" type="submit" value="Submit Appeal" class="submit" name="cmd" disabled="disabled" style="visibility:hidden" />
                        }*@
                        
                    </td>
                </tr>
            </table>
                   @*@Html.CheckBoxFor(model => model.IsCollegeEditable)
                  <span>I agree to the terms of JNTUH</span>
            <br/>
            <p>
                <span>Upload Appeal Declaration File</span> &nbsp;&nbsp;&nbsp;
               
            </p>
            <p>
                <input id="submitData" type="submit" value="Submit Appeal" class="submit" name="cmd" />
            </p>*@
        }






    }
</div>



<script type="text/javascript">
    $(document).ready(function () {



        $("#submitData").click(function () {
            var IsConfirm = true;
            var IsCollegeEditable = true;
            var isChecked = $('#IsCollegeEditable').is(':checked');
            if (isChecked == true) {
                IsCollegeEditable = true;
                var Confirm = confirm("Are you sure, you verified that the data uploaded is valid?");
                if (Confirm == true) {
                    IsConfirm = true;
                }
                else {
                    IsConfirm = false;
                }
            }
            else {
                alert("Please Select Agree");
                IsCollegeEditable = false;
            }

            return IsCollegeEditable && IsConfirm;

        });
    });
</script>

