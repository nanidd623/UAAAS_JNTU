@model UAAAS.Controllers.society
@{
    ViewBag.Title = "Merger of Colleges";
}

<h2>NOC for Merge of college</h2>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Validations.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jspdf.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jspdf.plugin.from_html.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#Pay').click(function (e) {
            debugger;
            var data = "challanNumber=@ViewBag.challnNumber&txnAmount=@ViewBag.totalFee&collegeCode=@ViewBag.collegeCode&noctype=@ViewBag.noctype";
            $.ajax({
                url: "/CollegeNOC/CollegeaddressSavePaymentRequest",
                type: "POST",
                contentType: "application/x-www-form-urlencoded",
                data: data,
                success: function (data) {
                    //$('#paymentform').submit();
                },
                error: function (event) {
                    // $(this).prop("checked", false);
                }
            });
        });
    });
</script>

@if (TempData["SUCCESS"] != null)
{
    <div class="success">
        <p class="SuccessText" style="text-align: center;font-weight: bold">@TempData["SUCCESS"].ToString()</p>
    </div><br />
}
@if (TempData["ERROR"] != null)
{
    <div class="error">
        <p style="text-align: center;font-weight: bold;">@TempData["ERROR"].ToString()</p>
    </div><br />
}

<div style="float:right;">
    @if (TempData["Status"] == "true" && ViewBag.IsPaymentDone == false)
    {
        <a href="/CollegeNOC/EditMergeCollege?id=@Model.Id" class="create_button" target="_blank">Edit</a>
    }

</div>
<br />
@using (Html.BeginForm())
{
    <div>
        <table width="50%" style="float:left" id="Test">
            <tr>
                <td class="col1" width="15%;">
                    <div>
                        <span>Parent Institution Name</span>
                    </div>
                </td>
                <td class="col2" width="35%;">
                    <div>
                        @Html.DisplayFor(model => model.clgsociety, new { @style = "" })
                    </div>
                </td>
            </tr>

        </table>
        @if (TempData["Status"] == "true")
        {
            <table width="50%" style="float:left" id="Test">
                <tr>
                    <td class="col1" width="15%;">
                        <div>
                            <span>Child Institution Name</span>
                        </div>
                    </td>
                    <td class="col2" width="35%;">
                        <div>
                            @Html.DisplayFor(model => model.societyname, new { @style = "" })
                        </div>
                    </td>
                </tr>

            </table>
        }
        else
        {
            <table width="50%" style="float:left" id="Test">
                <tr>
                    <td class="col1" width="15%;">
                        <div>
                            <span>Child Institution Name</span>
                        </div>
                    </td>
                    <td class="col2" width="35%;">
                        <div>
                            @*@Html.TextBoxFor(model => model.societyname, new { @style = "" })*@
                            @Html.DropDownListFor(model => model.societyname,
                            new SelectList(ViewBag.ChildColleges as System.Collections.IEnumerable, "collegeId", "collegeName"),
                                        "--Select--", new { id = "collegeId", style = "width: 75%" ,@class = "form-control"})
                        </div>
                    </td>
                </tr>
            </table>
        }
        <br />
        @if (TempData["Status"] != "true")
        {
            <div style="float:right;">
                <input type="submit" value="Save" />
            </div>
        }

    </div>
}
@if (TempData["Status"] == "true" && ViewBag.IsPaymentDone == false)
{
    <div style="float:right">
        <form method="post" id="paymentform" action="https://pgi.billdesk.com/pgidsk/PGIMerchantPayment">
            <input name="msg" type="hidden" value=@ViewBag.msg>
            <input type="submit" value="Pay" id="Pay" />
        </form>
    </div>

}
else if (ViewBag.IsPaymentDone == true)
{
    <p class="create_link_right">
        <span style="color: red; font-style: italic; font-weight: bold;">
            <a href="/CollegeNOC/MergeCollegeNameChangeAcknowlegement?noctypeid=@Model.NOCtype" style="font-weight: bold;font-size:15px;">
                <br />
                Download Request Letter
            </a>
        </span>
    </p>
}